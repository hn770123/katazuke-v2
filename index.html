<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="カタヅケ">
    <meta name="theme-color" content="#4A90A4">
    <meta name="description" content="片付け名人があなたの生活をサポート。毎日の隙間時間で無理なくキレイを維持できる片付け支援アプリ">

    <title>カタヅケ - 片付け支援システム</title>

    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" href="icons/icon-192.png">

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- ヘッダー -->
        <header class="header">
            <h1 class="logo">🏠 カタヅケ</h1>
            <button class="menu-btn" id="menuBtn" aria-label="メニュー">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </header>

        <!-- サイドメニュー -->
        <nav class="side-menu" id="sideMenu">
            <div class="menu-header">
                <span class="user-greeting" id="userGreeting">こんにちは！</span>
            </div>
            <ul class="menu-list">
                <li><a href="#" data-page="home" class="active">🏠 ホーム</a></li>
                <li><a href="#" data-page="tasks">📋 タスク一覧</a></li>
                <li><a href="#" data-page="tips">💡 片付けのコツ</a></li>
                <li><a href="#" data-page="progress">📊 進捗</a></li>
                <li><a href="#" data-page="settings">⚙️ 設定</a></li>
            </ul>
        </nav>
        <div class="overlay" id="overlay"></div>

        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- ホーム画面 -->
            <section class="page active" id="homePage">
                <div class="welcome-card" id="welcomeCard">
                    <div class="mascot">🧹</div>
                    <h2>片付け名人がサポートします！</h2>
                    <p>まずはあなたの生活スタイルを教えてください。<br>あなたにぴったりの片付けプランを作成します。</p>
                    <button class="btn btn-primary" id="startHearingBtn">ヒアリングを始める</button>
                </div>

                <div class="dashboard" id="dashboard" style="display: none;">
                    <!-- 現在のタスク -->
                    <div class="current-task-card">
                        <div class="time-badge" id="currentTimeBadge">朝</div>
                        <h3>今やること</h3>
                        <div class="task-highlight" id="currentTask">
                            <p class="task-name">タスクを読み込み中...</p>
                            <p class="task-duration"></p>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-success" id="completeTaskBtn">完了！</button>
                            <button class="btn btn-secondary" id="skipTaskBtn">スキップ</button>
                        </div>
                    </div>

                    <!-- 今日の進捗 -->
                    <div class="progress-card">
                        <h3>今日の進捗</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="todayProgress" style="width: 0%"></div>
                        </div>
                        <p class="progress-text"><span id="completedCount">0</span> / <span id="totalCount">0</span> タスク完了</p>
                    </div>

                    <!-- 今日のTip -->
                    <div class="tip-card">
                        <div class="tip-icon">💡</div>
                        <div class="tip-content">
                            <h4>今日のコツ</h4>
                            <p id="dailyTip">片付けのコツを読み込み中...</p>
                        </div>
                    </div>

                    <!-- 連続達成 -->
                    <div class="streak-card">
                        <div class="streak-icon">🔥</div>
                        <div class="streak-content">
                            <span class="streak-count" id="streakCount">0</span>
                            <span class="streak-label">日連続達成</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ヒアリング画面 -->
            <section class="page" id="hearingPage">
                <div class="hearing-container">
                    <div class="hearing-progress">
                        <div class="hearing-progress-bar">
                            <div class="hearing-progress-fill" id="hearingProgressFill"></div>
                        </div>
                        <span class="hearing-step" id="hearingStep">1/6</span>
                    </div>

                    <div class="hearing-content" id="hearingContent">
                        <!-- 質問がJSで動的に挿入される -->
                    </div>

                    <div class="hearing-nav">
                        <button class="btn btn-secondary" id="hearingBackBtn" style="visibility: hidden;">戻る</button>
                        <button class="btn btn-primary" id="hearingNextBtn">次へ</button>
                    </div>
                </div>
            </section>

            <!-- タスク一覧画面 -->
            <section class="page" id="tasksPage">
                <div class="page-header">
                    <h2>📋 タスク一覧</h2>
                </div>

                <div class="time-tabs">
                    <button class="time-tab active" data-time="morning">🌅 朝</button>
                    <button class="time-tab" data-time="evening">🌆 夕方</button>
                    <button class="time-tab" data-time="night">🌙 夜</button>
                    <button class="time-tab" data-time="weekend">🗓️ 休日</button>
                </div>

                <div class="task-list" id="taskList">
                    <!-- タスクがJSで動的に挿入される -->
                </div>
            </section>

            <!-- Tipsページ -->
            <section class="page" id="tipsPage">
                <div class="page-header">
                    <h2>💡 片付けのコツ</h2>
                </div>

                <div class="tips-categories">
                    <button class="category-btn active" data-category="all">すべて</button>
                    <button class="category-btn" data-category="basic">基本</button>
                    <button class="category-btn" data-category="maintain">維持</button>
                    <button class="category-btn" data-category="mindset">マインド</button>
                    <button class="category-btn" data-category="quick">時短</button>
                </div>

                <div class="tips-list" id="tipsList">
                    <!-- TipsがJSで動的に挿入される -->
                </div>
            </section>

            <!-- 進捗ページ -->
            <section class="page" id="progressPage">
                <div class="page-header">
                    <h2>📊 進捗</h2>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">✅</div>
                        <div class="stat-value" id="totalCompleted">0</div>
                        <div class="stat-label">完了タスク数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🔥</div>
                        <div class="stat-value" id="maxStreak">0</div>
                        <div class="stat-label">最長連続達成</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📅</div>
                        <div class="stat-value" id="activeDays">0</div>
                        <div class="stat-label">アクティブ日数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⭐</div>
                        <div class="stat-value" id="currentLevel">初心者</div>
                        <div class="stat-label">レベル</div>
                    </div>
                </div>

                <div class="calendar-section">
                    <h3>今月の活動</h3>
                    <div class="calendar" id="calendar">
                        <!-- カレンダーがJSで動的に挿入される -->
                    </div>
                </div>

                <div class="achievements-section">
                    <h3>🏆 バッジ</h3>
                    <div class="badges-grid" id="badgesGrid">
                        <!-- バッジがJSで動的に挿入される -->
                    </div>
                </div>
            </section>

            <!-- 設定ページ -->
            <section class="page" id="settingsPage">
                <div class="page-header">
                    <h2>⚙️ 設定</h2>
                </div>

                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>通知</h4>
                            <p>タスクのリマインダー通知</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="notificationToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>朝の時間帯</h4>
                            <p>朝のタスクを表示する時間</p>
                        </div>
                        <select id="morningTime" class="setting-select">
                            <option value="5">5:00 - 9:00</option>
                            <option value="6" selected>6:00 - 10:00</option>
                            <option value="7">7:00 - 11:00</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>夕方の時間帯</h4>
                            <p>夕方のタスクを表示する時間</p>
                        </div>
                        <select id="eveningTime" class="setting-select">
                            <option value="16">16:00 - 19:00</option>
                            <option value="17" selected>17:00 - 20:00</option>
                            <option value="18">18:00 - 21:00</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>夜の時間帯</h4>
                            <p>夜のタスクを表示する時間</p>
                        </div>
                        <select id="nightTime" class="setting-select">
                            <option value="20">20:00 - 23:00</option>
                            <option value="21" selected>21:00 - 24:00</option>
                            <option value="22">22:00 - 25:00</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>休日設定</h4>
                            <p>休日として扱う曜日</p>
                        </div>
                        <div class="weekday-selector" id="weekendDays">
                            <label><input type="checkbox" value="0" checked> 日</label>
                            <label><input type="checkbox" value="6" checked> 土</label>
                        </div>
                    </div>

                    <div class="setting-item">
                        <button class="btn btn-secondary" id="resetHearingBtn">ヒアリングをやり直す</button>
                    </div>

                    <div class="setting-item">
                        <button class="btn btn-danger" id="resetDataBtn">すべてのデータをリセット</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- 完了モーダル -->
        <div class="modal" id="completeModal">
            <div class="modal-content">
                <div class="modal-icon">🎉</div>
                <h3>タスク完了！</h3>
                <p id="completeMessage">素晴らしい！続けていきましょう！</p>
                <button class="btn btn-primary" id="closeModalBtn">OK</button>
            </div>
        </div>

        <!-- インストール促進バナー -->
        <div class="install-banner" id="installBanner" style="display: none;">
            <p>ホーム画面に追加して、いつでも簡単アクセス！</p>
            <button class="btn btn-small" id="installBtn">追加する</button>
            <button class="close-btn" id="closeInstallBanner">×</button>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
